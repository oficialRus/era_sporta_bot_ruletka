# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï

## –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

‚úÖ **–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç**  
‚úÖ **API –∑–∞–ø—É—â–µ–Ω** (–ø–æ—Ä—Ç 8080)  
‚úÖ **Web —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω** (–ø–æ—Ä—Ç 5173)  
‚úÖ **HTML –æ–±–Ω–æ–≤–ª–µ–Ω** (—Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –ø—É—Ç—å)  
‚ùå **Nginx –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω** –¥–ª—è –¥–æ–º–µ–Ω–∞ bot-wheel.era-sporta-apsheronsk.ru

---

## ‚ö° –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (2 –º–∏–Ω—É—Ç—ã)

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx

```bash
cd /root/era_sporta_bot_ruletka
sudo ./setup_nginx.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
- –ü—Ä–æ–≤–µ—Ä–∏—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç Nginx

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)

```bash
sudo certbot --nginx -d bot-wheel.era-sporta-apsheronsk.ru
```

Certbot —Å–ø—Ä–æ—Å–∏—Ç:
- Email (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ)
- –°–æ–≥–ª–∞—Å–∏–µ —Å ToS (Yes)
- Redirect HTTP ‚Üí HTTPS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: Yes)

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API
curl https://bot-wheel.era-sporta-apsheronsk.ru/api/prizes

# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å JSON —Å –ø—Ä–∏–∑–∞–º–∏
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –æ—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. Telegram ‚Üí @era_of_sports_apsheronsk_bot
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/start`
3. –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞
4. –ù–∞–∂–∞—Ç—å "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
5. **–†—É–ª–µ—Ç–∫–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å!**

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –í—Å–µ –∑–∞–ø—É—â–µ–Ω–æ?
ps aux | grep -E "api|serveweb|bot" | grep go

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 3 –ø—Ä–æ—Ü–µ—Å—Å–∞:
# - go run ./cmd/bot
# - go run ./cmd/api
# - go run ./cmd/serveweb
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤

```bash
sudo netstat -tulpn | grep -E "8080|5173"
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# :8080 - API
# :5173 - Web
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx

```bash
sudo systemctl status nginx
sudo nginx -t
```

### –õ–æ–≥–∏

```bash
# Nginx
sudo tail -f /var/log/nginx/bot-wheel-era-sporta-error.log

# API
tail -f /root/era_sporta_bot_ruletka/logs/api.log

# Web
tail -f /root/era_sporta_bot_ruletka/logs/web.log
```

---

## üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. DNS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä:

```bash
# –£–∑–Ω–∞—Ç—å IP —Å–µ—Ä–≤–µ—Ä–∞
curl -s ifconfig.me

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS
dig bot-wheel.era-sporta-apsheronsk.ru +short
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
```

–ï—Å–ª–∏ IP –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ A-–∑–∞–ø–∏—Å—å –≤ DNS:
```
bot-wheel.era-sporta-apsheronsk.ru ‚Üí –í–ê–®_IP
```

### 2. Certbot –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç 80 –æ—Ç–∫—Ä—ã—Ç:

```bash
sudo ufw status
sudo ufw allow 80
sudo ufw allow 443
```

### 3. 502 Bad Gateway

–°–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã:

```bash
cd /root/era_sporta_bot_ruletka
./stop.sh
./start.sh
```

### 4. CORS –æ—à–∏–±–∫–∏

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ API:

```bash
tail -f logs/api.log
```

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ `/api/`, –∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ –ø–æ—Ä—Ç 8080.

---

## üìù –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **HTML —Ñ–∞–π–ª –æ–±–Ω–æ–≤–ª–µ–Ω**
   - –ë—ã–ª–æ: `const API_BASE = 'http://' + window.location.hostname + ':8080'`
   - –°—Ç–∞–ª–æ: `const API_BASE = window.location.protocol + '//' + window.location.hostname`
   - –¢–µ–ø–µ—Ä—å API —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Nginx

2. **Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞**
   - `/api/*` ‚Üí –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ `localhost:8080`
   - `/*` ‚Üí –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ `localhost:5173`
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏

3. **–°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**
   - `setup_nginx.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx
   - `start.sh` - –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
   - `stop.sh` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

---

## üéØ –ò—Ç–æ–≥–æ: —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx
cd /root/era_sporta_bot_ruletka
sudo ./setup_nginx.sh

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL
sudo certbot --nginx -d bot-wheel.era-sporta-apsheronsk.ru

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
curl https://bot-wheel.era-sporta-apsheronsk.ru/api/prizes

# 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Telegram
# –û—Ç–∫—Ä—ã—Ç—å @era_of_sports_apsheronsk_bot
# /start ‚Üí –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º ‚Üí –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!** üéâ
